@echo off

type banner.txt

adb uninstall org.keenteam >log.txt
adb install exploitServiceApp.apk >>log.txt

REM Uploading files
echo Uploading files...
adb push main /data/local/tmp && adb shell chmod 777 /data/local/tmp/main >>log.txt
adb push a /data/local/tmp && adb shell chmod 755 /data/local/tmp/a  >>log.txt
adb push runroot.sh /data/local/tmp && adb shell chmod 755 /data/local/tmp/runroot.sh >>log.txt
adb shell chmod 777 /data/local/tmp >>log.txt

REM Run
echo Start rooting attempt
adb shell /data/local/tmp/runroot.sh >>log.txt

REM Wait for reboot
echo Reboot. Please wait
adb shell touch /data/local/tmp/boot_success >>log.txt
adb shell chmod 777 /data/local/tmp/boot_success >>log.txt
adb reboot >>log.txt

REM Cleanup
echo Cleaning up now... >>log.txt
adb wait-for-device >>log.txt
timeout /t 15 /nobreak >>log.txt
adb uninstall org.keenteam >>log.txt
adb install Superuser.apk >>log.txt

adb shell chmod 771 /data/local/tmp >>log.txt
adb shell rm -rf /data/local/tmp/a >>log.txt
adb shell rm -rf /data/local/tmp/main >>log.txt
adb shell rm -rf /data/local/tmp/runroot.sh >>log.txt

echo Please click SuperSU icon and check root status. Enjoy! :)
